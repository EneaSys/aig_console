<div class="page-layout blank">

    <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutAlign="start" fxLayoutAlign.gt-sm="start start">

        <div class="widget" fxFlex.gt-sm="auto">
            <div class="fuse-card auto-width p-16 m-8">
                <div class="h1 m-8 ml-16 mb-0 secondary-text"> {{ 'MAIN.DETAILS' | translate | titlecase }} {{
                    'COMMERCE.PURCHASE' | translate }}</div>
                <hr>
                <div class="h4 m-8 ml-16 mb-0 secondary-text">
                    ID: {{ purchaseDTO.id }}
                </div>
                <!-- AGGIUNGERE BOX DETAIL -->
                <div class="h4 m-8 ml-16 mb-0 secondary-text">Acquisto</div>
                <div class="h1 m-16">{{ purchaseDTO.amount | currency:'EUR' }}</div>
                <div class="h4 m-8 ml-16">Data: {{ purchaseDTO.insertedDateTime | date }}</div>
                <div class="h4 m-8 ml-16">Note: {{ purchaseDTO.statusNote}}</div>
                <div class="h4 m-8 ml-16">Closed: {{ purchaseDTO.closed }}</div>
                <br>
                <div fxLayoutAlign="end">
                    <button class="ml-8" mat-stroked-button color="primary" (click)="editPurchase(purchaseDTO)">{{
                        'MAIN.EDIT' | translate | titlecase }}</button>
                    <button class="ml-8" mat-stroked-button color="warn">{{ 'MAIN.DELETE' | translate | titlecase
                        }}</button>
                </div>
            </div>
        </div>

        <div class="widget" fxFlex.gt-sm="auto">
            <div class="fuse-card auto-width p-16 m-8">
                <div class="h3 m-8 ml-16 mb-0 secondary-text"><b>{{ 'COMMERCE.BUYERS' | translate | titlecase }}</b>
                </div>
                <div class="h1 m-16" *ngIf="purchaseDTO.buyer.eopoo">{{ purchaseDTO.buyer.eopoo | eopooName }}</div>
                <div class="h4 m-8 ml-16 mb-0 secondary-text">ID: {{ purchaseDTO.buyer.id }}</div>
                <div class="h4 m-8 ml-16 mb-0 secondary-text">Codice Anagrafica: {{ purchaseDTO.buyer.eopooCode }}</div>
                <div class="h4 m-8 ml-16">Stato: {{ purchaseDTO.buyer.statusNote | AigC6eGenericStatus }}</div>

                <button class="mr-8" mat-stroked-button color="accent"
                    [routerLink]="'/commerce/buyer/detail/' + purchaseDTO.buyer.id">Details</button>
            </div>
        </div>

    </div>

    <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutAlign="start" fxLayoutAlign.gt-sm="start start">

        <div class="widget" fxFlex.gt-sm="auto">
            <div class="fuse-card auto-width p-16 m-8">
                <div class="h3 m-8 ml-16 mb-0 secondary-text"><b>{{ 'COMMERCE.SELLER' | translate | titlecase }}</b>
                </div>
                <div class="h1 m-16">{{ purchaseDTO.buyer.seller.name }}</div>
            </div>
        </div>

        <div class="widget" fxFlex.gt-sm="auto">
            <div class="fuse-card auto-width p-16 m-8 table-with-add-button">
                <div class="h3 m-8 ml-16 mb-0 secondary-text"><b>{{ 'COMMERCE.PURCHASE_ITEMS' | translate | titlecase
                        }}</b></div>
                <aig-purchase-item-list-table [dataSource]="purchaseItemDTOs" [displayColumns]="purchaseItemDC"
                    [error]="purchaseItemError">
                </aig-purchase-item-list-table>

                <button mat-fab class="accent" class="add-button-in-list-table"
                    (click)="addPurchaseItem(purchaseItemDTO)">
                    <mat-icon>add</mat-icon>
                </button>
            </div>
        </div>

    </div>

    <div fxLayout="column" fxLayout.gt-sm="row" fxLayoutAlign="start" fxLayoutAlign.gt-sm="start start">

        <div class="widget" fxFlex.gt-sm="auto">
            <div class="fuse-card auto-width p-16 m-8 table-with-add-button">
                <div class="h3 m-8 ml-16 mb-0 secondary-text"><b>{{ 'COMMERCE.FISCAL_TRANSACTIONS' | translate |
                        titlecase }}</b></div>
                <aig-fiscal-transaction-list-table [dataSource]="fiscalTransactionDTOs"
                    [displayColumns]="fiscalTransactiondisplayColumns" [error]="fiscalTransactionError">
                </aig-fiscal-transaction-list-table>
            </div>
        </div>

        <div class="widget" fxFlex.gt-sm="auto">
            <div class="fuse-card auto-width p-16 m-8 table-with-add-button">
                <div class="h3 m-8 ml-16 mb-0 secondary-text"><b>{{ 'COMMERCE.PAYMENTS' | translate | titlecase }}</b>
                </div>
                <aig-payment-list-table [dataSource]="paymentDTOs" [displayColumns]="paymentDC" [error]="paymentError">
                </aig-payment-list-table>
            </div>
        </div>

    </div>

</div>